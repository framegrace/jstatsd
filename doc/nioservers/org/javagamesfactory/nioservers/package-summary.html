<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_03) on Sun Jan 20 23:04:34 GMT 2008 -->
<TITLE>
org.javagamesfactory.nioservers
</TITLE>

<META NAME="date" CONTENT="2008-01-20">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="org.javagamesfactory.nioservers";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../org/javagamesfactory/nioservers/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV PACKAGE&nbsp;
&nbsp;NEXT PACKAGE</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/javagamesfactory/nioservers/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<H2>
Package org.javagamesfactory.nioservers
</H2>
Overview
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#package_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Interface Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../org/javagamesfactory/nioservers/iMessageProcessor.html" title="interface in org.javagamesfactory.nioservers">iMessageProcessor</A></B></TD>
<TD>Clients that implement this can asynchronously receive messages from a remote server</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../org/javagamesfactory/nioservers/iServerInfo.html" title="interface in org.javagamesfactory.nioservers">iServerInfo</A></B></TD>
<TD>Contains all the metadata representing a single server instance</TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../org/javagamesfactory/nioservers/ResponseListener.html" title="class in org.javagamesfactory.nioservers">ResponseListener</A></B></TD>
<TD>FIXME: this class has the same bug that originally existed in the StringBasedServer - if it
 receives fewer than 4 bytes in the first read of a message, it will NOT correctly handle that
 (it needs the same workaround in SBS, i.e needs to check if the very first read reads fewer
 than 4 bytes, and if so, ignore it, reset one buffer, advance the other, and try again)</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../org/javagamesfactory/nioservers/ServerInfo.html" title="class in org.javagamesfactory.nioservers">ServerInfo</A></B></TD>
<TD>Contains all the metadata representing a single server instance</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../org/javagamesfactory/nioservers/SimpleServerDemo.html" title="class in org.javagamesfactory.nioservers">SimpleServerDemo</A></B></TD>
<TD>This is the class that runs automatically if you run the jar-file as an executable</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../org/javagamesfactory/nioservers/StringBasedClient.html" title="class in org.javagamesfactory.nioservers">StringBasedClient</A></B></TD>
<TD>A simple blocking client class that uses NIO over TCP, making it easier to interface with / share code
 with NIO servers you write.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../org/javagamesfactory/nioservers/StringBasedServer.html" title="class in org.javagamesfactory.nioservers">StringBasedServer</A></B></TD>
<TD>Base class that provides the core of a non-blocking NIO-driven server which can send and receive
 Strings seamlessly.</TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Enum Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../org/javagamesfactory/nioservers/ServerState.html" title="enum in org.javagamesfactory.nioservers">ServerState</A></B></TD>
<TD>Represents the core internal state of any StringBasedServer (or subclass)</TD>
</TR>
</TABLE>
&nbsp;

<P>
<A NAME="package_description"><!-- --></A><H2>
Package org.javagamesfactory.nioservers Description
</H2>

<P>
<h4>Overview</h4>
                <P>
                        For a simple demo, run the SimpleServerDemo class - this is
                        fully standalone basic implementation of a server using the
                        rest of this package that will test if you have all the
                        necessary additional libraries, e.g. Log4J
                </P>
                <h4>Usage</h4>
                <P>
                        Most of the time, you only care about 2 classes in this
                        package:
                        <a href="StringBasedServer.html">StringBasedServer</a>
                        , which ALL your servers will extend, and
                        <a href="StringBasedClient.html">StringBasedClient</a>
                        , which ALL your clients will use to do the low-level bytes
                        send and receive to the server.
                </P>
                <P>
                        Your clients also need to implement iMessageProcessor in
                        order to actually receive the parsed messages from the
                        server
                </P>
                <h4>Contact</h4>
                <P>
                Comments / suggestions / additions / fixes / ideas can be sent to:
                </P>
                <p>
                amartin at ncsoft.com
                </p>
                <h4>Misc</h4>
                <h5>Licensing</h5>
                <p>
                OpenBSD/MIT/etc - i.e. do what you like with this, just include a
                reference to the fact you used it, in the form of the following URL
                (or any different one that I later update this doc with):
                </p>
                <p>
                http://tmachine1.dh.bytemark.co.uk/blog/
                </p>
                <h5>Why did I make this?</h5>
                <P>
                Mainly because Sun's NIO libraries are very low-level, but with plenty of bugs,
                so that it takes a lot of time and effort to make even the simplest of working
                client/server applications with them.
                </P>
                <P>
                In case you weren't aware, MOST resources on the internet providing source code
                for Java NIO servers are WRONG and FULL OF BUGS that mean they WILL NOT WORK -
                including BOTH of the O'Reilly books I've read ("Java NIO" and "Learning Java").
                That's pretty shameful considering those are both extremely widely-used books :(.
                In both cases, the authors clearly A) never read the API properly, and B) never
                actually tried writing any NIO server code in their life. Or, at least, they
                wrote it but never ran it on the internet - a glance at their source code shows
                it won't work except on a local switched LAN, and even then only for VERY simple
                programs.
                </P>
                <P>
                So, although this library is NOT particularly optimized (mostly in that it is
                wasteful with how it creates ByteBuffers), it DOES ACTUALLY WORK and is pretty
                simple and well-documented, so hopefully you can use it to make your own servers.
                </P>
                <h5>Why string-based, and TCP only?</h5>
                <P>
                TCP only: because I created this for "incubation" projects - i.e. small game
                experiments I wanted to try out. The code supplied will actually work reasonably
                well for most realtime games with current internet performance (I've made various
                simple multiplayer games with it) - but if you find your game is particularly good
                and want to make a proper multiplayer version over the internet, you'll want to
                replace the TCP with UDP. That will be very, very easy to do - but not necessary
                for the majority of people who are just making simple games.
                </P> 
                <P>
                String-based: because A) you ALWAYS need strings! (what, your game has no in-game
                chat? Shame on you!), and B) it's much, much easier to debug, and C) when you're
                developing code very fast (I'm using Scrum) strings allow you to use "fuzzy"
                message protocols, such as XML + XPath, which means that when you switch around
                features, or change the message format, most of your code carries on working fine.
                Binary protocols tend to break every time you make even one tiny change.
                </P>
                <P>
                When you get to the point where strings aren't good enough performance for your
                game, you've already got a pretty damned advanced game, and you'll find the only
                thing you need to do to make this server work purely in bytes is to REMOVE lines
                of code (all the Charset encoding and decoding) and to change one or two method
                signatures to accept bytearrays or bytebuffers instead of strings as argument.
                </P> 
                <h5>javadocs verbosity</h5>
                <P>
                These javadocs are generated for ALL protected and public methods
                and variables, which means there's a lot you don't need to see
                (and usually isn't documented) - this is because there are several
                methods in the StringBasedServer that need to be protected (e.g.
                because you don't want them being public on your subclasses!) but
                which you MUST use (because they are abstract so you need to override
                them).
                </P>
                <p>
                Sadly, after a mere 10 years, eclipse + javadoc is not yet advanced
                enough to easily output protected docs only for that one class, and
                public for all others.
                </p>
<P>

<P>
<DL>
</DL>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../org/javagamesfactory/nioservers/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV PACKAGE&nbsp;
&nbsp;NEXT PACKAGE</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/javagamesfactory/nioservers/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
